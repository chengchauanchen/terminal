package com.vsxin.terminalpad;

import android.content.Context;
import android.support.test.InstrumentationRegistry;
import android.support.test.runner.AndroidJUnit4;
import android.text.TextUtils;
import android.util.Log;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
import com.vsxin.terminalpad.mvp.contract.presenter.CarBoatInfoPresenter;
import com.vsxin.terminalpad.mvp.entity.CarBean;
import com.vsxin.terminalpad.mvp.entity.PatrolBean;
import com.vsxin.terminalpad.mvp.entity.PersonnelBean;
import com.vsxin.terminalpad.mvp.entity.TerminalBean;
import com.vsxin.terminalpad.utils.NumberUtil;
import com.vsxin.terminalpad.utils.SortUtil;
import com.vsxin.terminalpad.utils.TimeUtil;

import org.junit.Test;
import org.junit.runner.RunWith;

import java.util.List;
import java.util.Map;

import static org.junit.Assert.*;

/**
 * Instrumented test, which will execute on an Android device.
 *
 * @see <a href="http://d.android.com/tools/testing">Testing documentation</a>
 */
@RunWith(AndroidJUnit4.class)
public class ExampleInstrumentedTest {

//    public static String patrolDataJson = "{\"patrolNo\":\"21米的指挥船\",\"patrolName\":\"21米的指挥船\",\"patrolOccupant\":null,\"patrolLat\":\"30.55331\",\"patrolLng\":\"114.35915\",\"bearing\":\"0.0\",\"altitude\":null,\"group\":null,\"speed\":\"0.0\",\"terminalType\":\"TERMINAL_PATROL\",\"status\":null,\"crateTime\":1565951755000,\"updateTime\":1569828679000,\"gpsGenerationTime\":1567333794000,\"terminalDtoMap\":{\"32010000001320000114\":{\"terminalType\":\"TERMINAL_BALL\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":\"32010000001320000114\",\"group\":null,\"lteNo\":\"32010000001320000114\",\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":null,\"gpsGenerationTime\":\"\"},\"32010000001320000115\":{\"terminalType\":\"TERMINAL_BALL\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":\"32010000001320000114\",\"group\":null,\"lteNo\":\"32010000001320000114\",\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":null,\"gpsGenerationTime\":null},\"32010000001320000116\":{\"terminalType\":\"TERMINAL_BALL\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":\"32010000001320000114\",\"group\":null,\"lteNo\":\"32010000001320000114\",\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":null,\"gpsGenerationTime\":1536222949002}},\"personnelDtoMap\":{\"88023374\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949003},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949004},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949005}]},\"88023375\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949006}]},\"88023376\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949007}]}}}";
//    public static String patrolDataJson = "{\"patrolNo\":\"21米的指挥船\",\"patrolName\":\"21米的指挥船\",\"patrolOccupant\":null,\"patrolLat\":\"30.55331\",\"patrolLng\":\"114.35915\",\"bearing\":\"0.0\",\"altitude\":null,\"group\":null,\"speed\":\"0.0\",\"terminalType\":\"TERMINAL_PATROL\",\"status\":null,\"crateTime\":1565951755000,\"updateTime\":1569828679000,\"gpsGenerationTime\":1567333794000,\"terminalDtoMap\":{},\"personnelDtoMap\":{\"88023374\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949008},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949004},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949005}]},\"88023375\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949006}]},\"88023376\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949007}]}}}";
    public static String patrolDataJson = "{\"patrolNo\":\"21米的指挥船\",\"patrolName\":\"21米的指挥船\",\"patrolOccupant\":null,\"patrolLat\":\"30.55331\",\"patrolLng\":\"114.35915\",\"bearing\":\"0.0\",\"altitude\":null,\"group\":null,\"speed\":\"0.0\",\"terminalType\":\"TERMINAL_PATROL\",\"status\":null,\"crateTime\":1565951755000,\"updateTime\":1569828679000,\"gpsGenerationTime\":1567333794000,\"terminalDtoMap\":{},\"personnelDtoMap\":{\"88023374\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":null}]}}}";

    public static String outDataJson = "[{\"terminalType\":\"TERMINAL_DDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":\"66113\",\"ddtType\":\"有线\",\"speed\":\"1.3\",\"altitude\":\"0\",\"bearing\":\"196.0\",\"lat\":30.5883,\"lng\":114.4349,\"status\":\"\",\"gpsGenerationTime\":1569079223000},{\"terminalType\":\"TERMINAL_DDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":\"66117\",\"ddtType\":\"有线\",\"speed\":\"1.2\",\"altitude\":\"0\",\"bearing\":\"284.0\",\"lat\":30.5798,\"lng\":114.3692,\"status\":\"\",\"gpsGenerationTime\":1569043981000},{\"terminalType\":\"TERMINAL_DDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":\"66114\",\"ddtType\":\"有线\",\"speed\":\"1.0\",\"altitude\":\"0\",\"bearing\":\"12.0\",\"lat\":30.5882,\"lng\":114.4347,\"status\":\"\",\"gpsGenerationTime\":1569143254000},{\"terminalType\":\"TERMINAL_DDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":\"66115\",\"ddtType\":\"有线\",\"speed\":\"1.0\",\"altitude\":\"0\",\"bearing\":\"176.0\",\"lat\":30.5883,\"lng\":114.4349,\"status\":\"\",\"gpsGenerationTime\":1569280382000},{\"terminalType\":\"TERMINAL_DDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":\"66119\",\"ddtType\":\"无线3\",\"speed\":\"1.1\",\"altitude\":\"0\",\"bearing\":\"106.0\",\"lat\":30.5767,\"lng\":114.3694,\"status\":\"\",\"gpsGenerationTime\":1569315275000}]";

    public static String carDataJson = "[{\"carName\":\"鄂A0790警\",\"carOccupant\":\"落雁派出所\",\"carLat\":\"30.570333\",\"carLng\":\"114.36515\",\"carNo\":\"鄂A0790警\",\"bearing\":\"0.0\",\"altitude\":null,\"group\":null,\"speed\":\"0.0\",\"terminalType\":\"TERMINAL_CAR\",\"status\":null,\"crateTime\":1564823897000,\"updateTime\":1569828679000,\"gpsGenerationTime\":1566554832000,\"terminalDtoMap\":{\"72045516\":{\"terminalType\":\"TERMINAL_PDT_CAR\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":null,\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":\"72045516\",\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"ONLINE\",\"gpsGenerationTime\":null}},\"personnelDtoMap\":{\"88023374\":{\"personnelName\":null,\"personnelNo\":\"88023374\",\"personnelLat\":\"30.564174235\",\"personnelLng\":\"114.358115193\",\"department\":\"落雁派出所\",\"name\":\"任守一\",\"phoneNumber\":\"18696162011\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033200938526955\",\"account\":\"88023374\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"27.582750034\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536222949000}]}}}]";

    public static String personnelDataJson ="[{\"personnelName\":null,\"personnelNo\":\"88023384\",\"personnelLat\":\"30.564244922\",\"personnelLng\":\"114.366974539\",\"department\":\"东湖生态旅游风景区分局听涛派出所\",\"name\":\"王槐林\",\"phoneNumber\":\"15527711919\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033201019322606\",\"account\":\"88023384\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"7.4220099449157715\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1545356744000}]},{\"personnelName\":null,\"personnelNo\":\"88023382\",\"personnelLat\":\"30.555719051\",\"personnelLng\":\"114.360693607\",\"department\":\"东湖生态旅游风景区分局吹笛派出所\",\"name\":\"郭亨孙\",\"phoneNumber\":\"\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033199354458824\",\"account\":\"88023382\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.399981\",\"altitude\":\"13.139886856079102\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1539675071000}]},{\"personnelName\":null,\"personnelNo\":null,\"personnelLat\":\"30.555567\",\"personnelLng\":\"114.354083\",\"department\":\"磨山派出所\",\"name\":\"商安定\",\"phoneNumber\":\"13349910518\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":\"88023380\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0\",\"lat\":null,\"lng\":null,\"status\":\"\",\"gpsGenerationTime\":1567496874000},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033198931384582\",\"account\":\"88023380\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0281974\",\"altitude\":\"17.83220863342285\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1538809498000}]},{\"personnelName\":null,\"personnelNo\":\"88023418\",\"personnelLat\":\"30.576353528\",\"personnelLng\":\"114.374524899\",\"department\":\"东湖生态旅游风景区分局人口管理大队\",\"name\":\"刘冕\",\"phoneNumber\":\"15527703388\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"15603319839071463\",\"account\":\"88023418\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.279148\",\"altitude\":\"29.309463500976562\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1538466703000}]},{\"personnelName\":null,\"personnelNo\":\"88021999\",\"personnelLat\":\"30.544075522675303\",\"personnelLng\":\"114.40526507967343\",\"department\":\"东湖生态旅游风景区分局治安巡逻民警大队\",\"name\":\"徐拥民\",\"phoneNumber\":\"15527705533\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"15603320091665189\",\"account\":\"88021999\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"9.8294\",\"altitude\":\"17.157322542328785\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1537324869000}]},{\"personnelName\":null,\"personnelNo\":\"88021998\",\"personnelLat\":\"30.536989578717215\",\"personnelLng\":\"114.41140368490855\",\"department\":\"东湖生态旅游风景区分局磨山派出所\",\"name\":\"吴海斌\",\"phoneNumber\":\"15527776262\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033198340376429\",\"account\":\"88021998\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"1.01053\",\"altitude\":\"24.925820401102975\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1544411451000}]},{\"personnelName\":null,\"personnelNo\":null,\"personnelLat\":\"30.549233\",\"personnelLng\":\"114.408367\",\"department\":\"磨山派出所\",\"name\":\"鲁建军\",\"phoneNumber\":\"18602740318\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":\"88021997\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0\",\"lat\":null,\"lng\":null,\"status\":\"\",\"gpsGenerationTime\":1567279841000},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033201090967066\",\"account\":\"88021997\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"3.53643\",\"altitude\":\"28.515495324814587\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1538641871000}]},{\"personnelName\":null,\"personnelNo\":null,\"personnelLat\":\"30.538067\",\"personnelLng\":\"114.378433\",\"department\":\"水上派出所\",\"name\":\"叶俊川\",\"phoneNumber\":\"18971232323\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":\"88021996\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0\",\"lat\":null,\"lng\":null,\"status\":\"\",\"gpsGenerationTime\":1564146168000}]},{\"personnelName\":null,\"personnelNo\":null,\"personnelLat\":\"30.529417\",\"personnelLng\":\"114.402617\",\"department\":\"磨山派出所\",\"name\":\"陈晋辉\",\"phoneNumber\":\"18971264318\",\"terminalType\":\"TERMINAL_PERSONNEL\",\"group\":null,\"terminalDtoList\":[{\"terminalType\":\"TERMINAL_PDT\",\"terminalGroupNo\":null,\"terminalUniqueNo\":null,\"account\":\"88021995\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"0.0\",\"altitude\":\"0\",\"bearing\":\"0\",\"lat\":null,\"lng\":null,\"status\":\"\",\"gpsGenerationTime\":1567595406000},{\"terminalType\":\"TERMINAL_PHONE\",\"terminalGroupNo\":null,\"terminalUniqueNo\":\"156033201068372658\",\"account\":\"88021995\",\"gb28181No\":null,\"group\":null,\"lteNo\":null,\"pdtNo\":null,\"ddtNo\":null,\"ddtType\":null,\"speed\":\"2.80713E-4\",\"altitude\":\"23.03172492980957\",\"bearing\":\"0.0\",\"lat\":null,\"lng\":null,\"status\":\"OFFLINE\",\"gpsGenerationTime\":1536287984000}]}]";

    @Test
    public void text(){
        String s = NumberUtil.remove88("");
        System.out.println(s);
    }


    @Test
    public void useAppContext() {
        // Context of the app under test.
        //Context appContext = InstrumentationRegistry.getTargetContext();

       // assertEquals("com.vsxin.terminal_pad", appContext.getPackageName());

        Gson gson = new Gson();

        PatrolBean patrolBean = new Gson().fromJson(patrolDataJson, PatrolBean.class);
        List<CarBean> carBeans = gson.fromJson(carDataJson, new TypeToken<List<CarBean>>() {}.getType());
        List<PersonnelBean> personnelBeans = gson.fromJson(carDataJson, new TypeToken<List<PersonnelBean>>() {}.getType());
        List<TerminalBean> terminalBeans = gson.fromJson(carDataJson, new TypeToken<List<TerminalBean>>() {}.getType());
        //CarBoatInfoPresenter.sortMapByValue2()

        String lastGpsGenerationTime = getLastGpsGenerationTime(patrolBean);
        Log.e("time",lastGpsGenerationTime);
        String s = TimeUtil.formatLongToStr(NumberUtil.strToLong(lastGpsGenerationTime));
        Log.e("time",s);
//        //船
//        Map<String, PersonnelBean> personnelDtoMap = patrolBean.getPersonnelDtoMap();
//        Map<String, PersonnelBean> personnelBeanMap = CarBoatInfoPresenter.sortMapByValue2(personnelDtoMap, false);
//        PersonnelBean firstOrNull2 = CarBoatInfoPresenter.getFirstOrNull2(personnelBeanMap);
//
//        Map<String, TerminalBean> terminalDtoMap = patrolBean.getTerminalDtoMap();
//
//        Map<String, TerminalBean> stringTerminalBeanMap = CarBoatInfoPresenter.sortMapByValue(terminalDtoMap, false);
//        TerminalBean firstOrNull = CarBoatInfoPresenter.getFirstOrNull(stringTerminalBeanMap);
//        System.out.println(firstOrNull.getGpsGenerationTime());
    }

    public String getLastGpsGenerationTime(PatrolBean patrol) {

        //单独装备最后上线时间
        String lastTerminalTime = "";
        String lastPersonnelTime = "";

        Map<String, TerminalBean> terminalDtoMap = patrol.getTerminalDtoMap();
        if (terminalDtoMap != null && !terminalDtoMap.isEmpty()) {
            Map<String, TerminalBean> sortTerminalBeanMap = SortUtil.sortMapTerminal(terminalDtoMap, false);//降序 第一个最大
            TerminalBean firstTerminal = SortUtil.getFirstTerminalBean(sortTerminalBeanMap);
            if(firstTerminal!=null){
                lastTerminalTime = firstTerminal.getGpsGenerationTime();
            }
        }
        //绑定民警 最后上线时间最大者
        Map<String, PersonnelBean> personnelDtoMap = patrol.getPersonnelDtoMap();
        if(personnelDtoMap != null && !personnelDtoMap.isEmpty()){
            Map<String, PersonnelBean> sortPersonnelBeanMap = SortUtil.sortMapPersonnel(personnelDtoMap,false);//降序 第一个最大
            PersonnelBean firstPersonnel = SortUtil.getFirstPersonnel(sortPersonnelBeanMap);
            if(firstPersonnel!=null && firstPersonnel.getTerminalDtoList()!=null && firstPersonnel.getTerminalDtoList().size()>0){
                if(!TextUtils.isEmpty(firstPersonnel.getTerminalDtoList().get(0).getGpsGenerationTime())){
                    lastPersonnelTime = firstPersonnel.getTerminalDtoList().get(0).getGpsGenerationTime();
                }
            }
        }
        if(!TextUtils.isEmpty(lastTerminalTime) && !TextUtils.isEmpty(lastPersonnelTime)){
            return lastTerminalTime.compareTo(lastPersonnelTime)>0?lastTerminalTime:lastPersonnelTime;
        }else if(TextUtils.isEmpty(lastTerminalTime)) {
            return lastPersonnelTime;
        }else {
           return lastTerminalTime;
        }
    }
}
